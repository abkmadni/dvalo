<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <title>DVALO Admin</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
        
        <div id="header" style="background-color: rgb(40, 176, 40);">
            <div><h1 style="padding-left: 20px; color: white; font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif; font-size: 10vh;">D<i class="fa-brands fa-vuejs" style="font-size: 9vh;"></i>ALO</h1></div>
            <div id="nav-separator"></div>
            <nav style="padding: 10px; padding-right: 20px;">
                <a href="./index.html">Home</a>
                <a href="./products.html">Products</a>
                <a href="./cart.html">Cart</a>
                <a href="./about.html">About</a>
                <a id="login" href="./login.html">Login</a>
            </nav>
        </div>
    
        <div class="side-panel">
            <h4>Manage Products</h4>
            <ul>
                <li><a href="./admin.html">Add Product</a></li>
                <li><a href="./admin.html">Remove Product</a></li>
                <li><a href="./admin.html">Update Product</a></li>
            </ul>

            <h4>Manage Users</h4>
            <ul>
                <li><a href="./admin.html">Add User</a></li>
                <li><a href="./admin.html">Remove User</a></li>
                <li><a href="./admin.html">Update User</a></li>
            </ul>

            <h4>Manage Orders</h4>
            <ul>
                <li><a href="./admin.html">Add Order</a></li>
                <li><a href="./admin.html">Remove Order</a></li>
                <li><a href="./admin.html">Update Order</a></li>
            </ul>

            <h4>Manage Admins</h4>
            <ul>
                <li><a href="./admin.html">Add Admin</a></li>
                <li><a href="./admin.html">Remove Admin</a></li>
                <li><a href="./admin.html">Update Admin</a></li>
            </ul>

        </div>
    
        <div class="footer">
            <p>
                All rights reserved. DVALO 2024
            </p>
        </div>

</body>
<script>
    (async () => {
  if (localStorage.getItem('isLoggedIn') === 'true') {
    let userDetails = JSON.parse(localStorage.getItem('userDetails'));
    console.log(userDetails);
    let response = await fetch(`http://localhost:8090/api/User/${userDetails}`,
      {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json'
        }
      });
    let data = await response.json();
    console.log(`${data[0].UserName} is logged in`);
    document.getElementById('login').innerText = `Welcome ${data[0].UserName}`;
    document.getElementById('login').href = 'profile.html';
  } else {
    console.log('User is not logged in');
  }
})();


</script>
</html>